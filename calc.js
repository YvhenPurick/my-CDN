const calcSteps=".calc-steps",calcSection=".calc__section",CoverageCalculatedBlock="._1212",calcThirdStep=".calculator-form__grid",submitBtn="#submitBtn",emailForm="#email-form",backBtn=".calc-steps__back-button",ageInput="#age_fild",myChildrenCheckBox="#my_children_checkbox",myChildrenBloc="#my_children_block",myParrentBlock="#my_partner_block",otherBlock="#others_block",noOneDependsOnMeBlock="#no_one_depends_on_me_block",divnested='<div class="calc__input-row new_element"><div class="input__label">Edad del primer hijo</div><input type="text" maxlength="256" data-name="" placeholder="e.g. 11" required="" class="input children_age_input w-input"></div>';formulaPrice=[...Array(18),"0.41532","0.4196866667","0.42674","0.4344133333","0.4432266667","0.4522266667","0.4573733333","0.4646133333","0.46646","0.46256","0.45606","0.44822","0.4405266667","0.43796","0.44196","0.4510533333","0.4771","0.51466","0.55824","0.61268","0.6695533333","0.7276666667","0.79526","0.8706933333","0.97392","1.107326667","1.263546667","1.440666667","1.640646667","1.870786667","2.130713333","2.42474","2.745033333","3.052506667","3.353793333","3.666933333","3.99792","4.347673333","4.718506667","5.112446667","5.522093333","5.946326667","6.386133333","6.854013333","7.345206667","7.874593333","8.453193333","9.094546667","9.902726667","10.8204","11.86606667","13.06653333","14.44147333"],formulaPriceWithDesabilyty=[...Array(18),"0.45532","0.4596866667","0.47674","0.4944133333","0.5032266667","0.5222266667","0.5373733333","0.5546133333","0.55646","0.57256","0.57606","0.57822","0.5805266667","0.59796","0.62196","0.6510533333","0.6971","0.75466","0.82824","0.91268","1.009553333","1.097666667","1.20526","1.330693333","1.48392","1.677326667","1.893546667","2.140666667","2.420646667","2.740786667","3.090713333","3.49474","3.935033333","4.372506667","4.823793333","5.296933333","5.80792","6.367673333","6.958506667","7.602446667","8.292093333","9.016326667","9.806133333","10.65401333","11.56520667","12.56459333","13.66319333","14.88454667","16.33272667","10.8204","11.86606667","13.06653333","14.44147333"];let countChildren=1,countMyPartner=1,countOtherPersona=1,countNoOneDependsOnMe=1;const steps={first:1,second:2,third:3,four:4};let stepCount=1;const showStep=e=>{$(".calc__step-content").each(t=>e===steps.first?($(".calc__step-content").eq(0).css("display",""),$(".calc__step-content").eq(1).css("display",""),$(".calc__step-content").eq(2).css("display","none"),$(".calc__step-content").eq(3).css("display","none"),$(".calc-steps__step-items-wrap .calc-steps__step-number").eq(0).removeClass("filled-number"),$(".calc-steps__step-items-wrap .calc-steps__step-number").eq(0).addClass("active-number"),$(".calc-steps__step-items-wrap .calc-steps__step-number").eq(1).removeClass("active-number"),void $(".calc-steps__step-items-wrap .calc-steps__step-number").eq(1).removeClass("filled-number")):e===steps.second?($(".calc__step-content").eq(0).css("display","none"),$(".calc__step-content").eq(1).css("display","none"),$(".calc__step-content").eq(2).css("display",""),$(".calc__step-content").eq(3).css("display","none"),$(".calc-steps__step-items-wrap .calc-steps__step-number").eq(0).addClass("filled-number"),$(".calc-steps__step-items-wrap .calc-steps__step-number").eq(1).addClass("active-number"),$(".calc-steps__step-items-wrap .calc-steps__step-number").eq(2).removeClass("active-number"),void $(".calc-steps__step-items-wrap .calc-steps__step-number").eq(2).removeClass("filled-number")):e===steps.third?($(".calc__step-content").eq(0).css("display","none"),$(".calc__step-content").eq(1).css("display","none"),$(".calc__step-content").eq(2).css("display","none"),$(".calc__step-content").eq(3).css("display",""),$(".div-block-24").css("display","none"),$(".calc-steps__step-items-wrap .calc-steps__step-number").eq(1).addClass("filled-number"),void $(".calc-steps__step-items-wrap .calc-steps__step-number").eq(2).addClass("active-number")):void 0)};let myPartner=0;$("#my_partner_checkbox").click(()=>{myPartner=$("#my_partner_checkbox").is(":checked")?3:0});const coverageTotalValue=(e=0)=>{let t=$("#others_checkbox").is(":checked")?3*Number($("#others_count").val()):0,n=$(".calc__checkbox-item > input").eq(4).is(":checked")?$("#hipoteca_input").val():0,c=$(".calc__checkbox-item > input").eq(5).is(":checked")?Number($("#other_debts_input").val()):0,l=$(".calc__switch-icon").eq(0).hasClass("w--redirected-checked")?6500:0,o=$(".calc__switch-icon").eq(1).hasClass("w--redirected-checked"),a=$("#no_one_depends_on_me_checkbox").is(":checked"),s=$(".children_age_input").filter(function(){return $(this).val()<18?$.trim($(this).val()):0}),_=[];s.each((e,t)=>{_.push(Number(5e3*(18-$(t).val())))}),a&&(myPartner=0,t=1,s.length=0,_.length=0),$("#my_children_checkbox").is(":checked")||(s.length=0,_.length=0),console.log("childrenArr",_);let r=o?Number(2*$("#annual_gross_salary_input").val()):Number($("#annual_gross_salary_input").val()),i=r*(myPartner+t)+Number(n)+c+l,p=_.map(e=>x+=e,x=0).reverse()[0],u=Number($(ageInput).val()),d=(p||0)+Number($("#current_savings_input").val())+(i||r)+Number(e),m=d/1e3*(Boolean(o)?formulaPriceWithDesabilyty[u]:formulaPrice[u]);return[p?d-r:d,Math.floor(m)]};let count=0;$("#adjust_btn").on("click",()=>{let e=$(".children_age_input").filter(function(){return $(this).val()<18?$.trim($(this).val()):0}),t=[];e.each((e,n)=>{t.push(Number(5e3*(18-$(n).val())))}),t.length>0&&$("#income_replacment_input").val(coverageTotalValue(count)[0]),myPartner&&$("#college_tuition_input").val(coverageTotalValue(count)[0]),$(".calc__switch-icon").eq(0).hasClass("w--redirected-checked")&&$("#combined_debt_input").val(6500),$("#summary_value").text(coverageTotalValue(count)[0])});const onNextStep=e=>{e.preventDefault();let t=[];$(".children_age_input").filter(function(){return $.trim($(this).val())}).each((e,n)=>{t.push($(n).val())});const n=(e,t,n)=>{$(n).unbind("click").click(t=>{let n=$(e).val();count-=1e3,0!==Number(n)&&$(e).val(Number(n)-1e3)}),$(t).unbind("click").click(t=>{let n=$(e).val();count+=1e3,$(e).val(Number(n)+1e3)})};n("#income_replacment_input","#income_replacement_increment","#income_replacement_decriment"),n("#college_tuition_input","#college_tuition_increment","#college_tuition_decriment"),n("#combined_debt_input","#combined_debt_increment","#combined_debt_decriment"),n("#burial_costs_input","#burial_costs_increment","#burial_costs_decriment"),n("#additional_needs_input","#additional_needs_increment","#additional_needs_decriment"),$("#capital_id").text("€"+coverageTotalValue(count)[0]),$("#pay_per_m").text("€"+coverageTotalValue(count)[1]),$("#coverage_total_tus_plan").text("€"+coverageTotalValue(count)[0]),$("#calc_total_tus_plan").text("€"+coverageTotalValue(count)[1]),$(".calc__input-button").on("keyup change click",()=>{let e=+$("#income_replacment_input").val()+ +$("#college_tuition_input").val()+ +$("#combined_debt_input").val()||0;$("#summary_value").text(e),console.log("test",e),$("#coverage_total_tus_plan").text("€"+coverageTotalValue(count)[0]),$("#calc_total_tus_plan").text("€"+coverageTotalValue(count)[1]),$("#capital_id").text("€"+coverageTotalValue(count)[0]),$("#pay_per_m").text("€"+coverageTotalValue(count)[1])}),showStep(++stepCount)},onPrewStep=e=>{e.preventDefault(),1!=stepCount&&stepCount--,showStep(stepCount)};$(myChildrenBloc).css("display","none"),$(myParrentBlock).css("display","none"),$(".w-form-fail").remove(),$(otherBlock).css("display","none"),$(noOneDependsOnMeBlock).css("display","none"),$("#see_my_plan_button").css("display","none"),$("#see_my_plan_button").text("Next"),$("#summary_value").text(0),$(".cal--answers").css("display","none"),$("#income_replacment_input").css("color","white"),$("#college_tuition_input").css("color","white"),$("#combined_debt_input").css("color","white"),$(".calc__checkbox-item").eq(5).wrap("<div class='calc__section-content-row' id='wraper_for_el'></div>"),$(".calc__checkbox-item > input").eq(5).click(()=>{$(".calc__checkbox-item > input").eq(5).is(":checked")?$("#wraper_for_el").append('<div class="calc__input-row" style="margin-left:24px;"><input type="text" maxlength="256" data-name="" placeholder="deudas y/o préstamos" id="other_debts_input" class="input number number w-input"></div>'):$("#other_debts_input").remove()}),$("#email-form").validate({rules:{age_input:{required:!0,range:[18,70]},number:{required:!0,digits:!0},email:{required:!0,email:!0}},errorPlacement:function(e,t){e.css({color:"#ef7065"}),e.insertAfter(t)}}),$("#my_children_block .calc__input-button").eq(0).click(e=>{e.preventDefault(),countChildren>1&&($("#my_children_block .new_element").eq(0).remove(),countChildren--),$("#my_children_count").val(countChildren)}),$("#my_children_block .calc__input-button").eq(1).click(e=>{countChildren>0&&$("#my_children_block").append(divnested),e.preventDefault(),countChildren++,$("#my_children_count").val(countChildren)}),$("#my_partner_block .calc__input-button").eq(0).click(e=>{e.preventDefault(),countMyPartner>1&&($("#my_partner_block .new_element").eq(0).remove(),countMyPartner--),$("#my_partner_count").val(countMyPartner)}),$("#my_partner_block .calc__input-button").eq(1).click(e=>{countMyPartner>0&&$("#my_partner_block").append(divnested),e.preventDefault(),countMyPartner++,$("#my_partner_count").val(countMyPartner)}),$("#others_block .calc__input-button").eq(0).click(e=>{e.preventDefault(),1!==countOtherPersona&&(countOtherPersona--,$("#others_count").val(countOtherPersona))}),$("#others_block .calc__input-button").eq(1).click(e=>{e.preventDefault(),countOtherPersona++,$("#others_count").val(countOtherPersona)}),$("#no_one_depends_on_me_block .calc__input-button").eq(0).click(e=>{e.preventDefault(),countNoOneDependsOnMe>1&&($("#no_one_depends_on_me_block .new_element").eq(0).remove(),countNoOneDependsOnMe--),$(".no_one_depends_on_me_count").val(countNoOneDependsOnMe)}),$("#no_one_depends_on_me_block .calc__input-button").eq(1).click(e=>{countNoOneDependsOnMe>0&&$("#no_one_depends_on_me_block").append(divnested),e.preventDefault(),countNoOneDependsOnMe++,$(".no_one_depends_on_me_count").val(countNoOneDependsOnMe)}),$(myChildrenCheckBox).click(()=>{$("#my_children_count").val(countChildren),$(myChildrenCheckBox).is(":checked")?$(myChildrenBloc).css("display","block"):$(myChildrenBloc).css("display","none")}),$("#others_count").attr({max:20,min:1,value:1,type:"number"}),$("#age_fild").attr({max:75}),$("#others_checkbox").click(()=>{$("#others_checkbox").is(":checked")?($("#others_block").css("display","block"),$("#others_block .children_age_input").css("display","none"),$("#others_block .input__label").css("display","none")):($("#others_block").css("display","none"),$("#others_checkbox").css("display","none"))}),showStep(steps.first),$(submitBtn).on("click",e=>{$("#email-form").valid()&&onNextStep(e)}),$(backBtn).on("click",e=>{onPrewStep(e)}),$("#edit_button").on("click",e=>{onPrewStep(e)});
